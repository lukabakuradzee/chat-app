{"ast":null,"code":"var _jsxFileName = \"/Users/macintoshi/Desktop/chat-app/chat-app/src/components/LikeButton/LikeButton.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getUserProfile, userLikes } from '../../api/services/userServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Like = ({\n  postId,\n  user\n}) => {\n  _s();\n  const [likes, setLikes] = useState([]);\n  const {\n    username\n  } = useParams();\n  const [isLiked, setIsLiked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    setIsLiked(likes.some(like => like.userId === user.userId));\n  }, [likes, user.userId]);\n  useEffect(() => {\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        const updatedLikes = await userLikes(postId, user.userId);\n        const userProfile = await getUserProfile(username);\n        if (updatedLikes && updatedLikes.likes) {\n          setLikes(updatedLikes.likes);\n          setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n        } else {\n          setError('Failed to fetch likes');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLikes();\n  }, [postId, user.userId]);\n  const handleUserLike = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const updatedLikes = await userLikes(postId, user.userId);\n      if (updatedLikes && updatedLikes.likes) {\n        setLikes(updatedLikes.likes);\n        setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n      } else {\n        setError('Failed to update likes');\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: handleUserLike,\n      className: \"cursor-pointer\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fa-heart ${isLiked ? 'fa-solid text-red-500' : 'fa-regular'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-10\",\n      children: [\"Likes: \", likes.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-semibold\",\n        children: \"Liked by:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside\",\n        children: likes.map((like, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-like-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.userAvatar,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-red-500\",\n            children: like.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Like, \"ZY7FQWjvjJoZQ0+XxS10AH4yreE=\", true);\n_c = Like;\nexport default Like;\nvar _c;\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["React","useState","useEffect","getUserProfile","userLikes","jsxDEV","_jsxDEV","Like","postId","user","_s","likes","setLikes","username","useParams","isLiked","setIsLiked","loading","setLoading","error","setError","some","like","userId","fetchLikes","updatedLikes","userProfile","message","handleUserLike","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","length","map","index","src","userAvatar","alt","_c","$RefreshReg$"],"sources":["/Users/macintoshi/Desktop/chat-app/chat-app/src/components/LikeButton/LikeButton.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getUserProfile, userLikes } from '../../api/services/userServices';\n\nconst Like = ({ postId, user }) => {\n  const [likes, setLikes] = useState([]);\n  const {username} = useParams();\n  const [isLiked,setIsLiked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    setIsLiked(likes.some(like => like.userId === user.userId));\n  }, [likes, user.userId]);\n\n  useEffect(() => {\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        const updatedLikes = await userLikes(postId, user.userId);\n        const userProfile = await getUserProfile(username)\n\n        if (updatedLikes && updatedLikes.likes) {\n          setLikes(updatedLikes.likes);\n          setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n        } else {\n          setError('Failed to fetch likes');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [postId, user.userId]);\n\n  const handleUserLike = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const updatedLikes = await userLikes(postId, user.userId);\n      if (updatedLikes && updatedLikes.likes) {\n        setLikes(updatedLikes.likes);\n        setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n      } else {\n        setError('Failed to update likes');\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <span onClick={handleUserLike} className=\"cursor-pointer\">\n        <i className={`fa-heart ${isLiked ? 'fa-solid text-red-500' : 'fa-regular'}`}></i>\n      </span>\n      <p className=\"mt-10\">Likes: {likes.length}</p>\n      <div>\n        <p className=\"font-semibold\">Liked by:</p>\n        <ul className=\"list-disc list-inside\">\n          {likes.map((like, index) => (\n            <div key={index} className='user-like-box'>\n              <div>\n                <img src={user.userAvatar} alt=\"\" />\n              </div>\n            <li className=\"text-red-500\">\n              {like.username}\n            </li>\n            </div>\n          ))}\n        </ul>\n      </div>\n      {loading && <p>Loading...</p>}\n      {error && <p className=\"text-red-500\">{error}</p>}\n    </div>\n  );\n};\n\nexport default Like;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}