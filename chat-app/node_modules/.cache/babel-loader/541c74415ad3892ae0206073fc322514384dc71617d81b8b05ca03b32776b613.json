{"ast":null,"code":"var _jsxFileName = \"/Users/macintoshi/Desktop/chat-app/chat-app/src/components/LikeButton/LikeButton.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getUserProfile, userLikes } from '../../api/services/userServices';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Like = ({\n  postId,\n  user\n}) => {\n  _s();\n  const [likes, setLikes] = useState([]);\n  const {\n    username\n  } = useParams();\n  const [isLiked, setIsLiked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [profile, setfirst] = useState(second);\n  useEffect(() => {\n    setIsLiked(likes.some(like => like.userId === user.userId));\n  }, [likes, user.userId]);\n  useEffect(() => {\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        const updatedLikes = await userLikes(postId, user.userId);\n        const userProfile = await getUserProfile(username);\n        if (updatedLikes && updatedLikes.likes) {\n          setLikes(updatedLikes.likes);\n          setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n        } else {\n          setError('Failed to fetch likes');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLikes();\n  }, [postId, user.userId]);\n  const handleUserLike = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const updatedLikes = await userLikes(postId, user.userId);\n      if (updatedLikes && updatedLikes.likes) {\n        setLikes(updatedLikes.likes);\n        setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n      } else {\n        setError('Failed to update likes');\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: handleUserLike,\n      className: \"cursor-pointer\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fa-heart ${isLiked ? 'fa-solid text-red-500' : 'fa-regular'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-10\",\n      children: [\"Likes: \", likes.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-semibold\",\n        children: \"Liked by:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside\",\n        children: likes.map((like, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-like-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.userAvatar,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-red-500\",\n            children: like.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(Like, \"WceQ47aaay0AfpHBBhd4CHwT2p4=\", false, function () {\n  return [useParams];\n});\n_c = Like;\nexport default Like;\nvar _c;\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["React","useState","useEffect","getUserProfile","userLikes","useParams","jsxDEV","_jsxDEV","Like","postId","user","_s","likes","setLikes","username","isLiked","setIsLiked","loading","setLoading","error","setError","profile","setfirst","second","some","like","userId","fetchLikes","updatedLikes","userProfile","message","handleUserLike","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","length","map","index","src","userAvatar","alt","_c","$RefreshReg$"],"sources":["/Users/macintoshi/Desktop/chat-app/chat-app/src/components/LikeButton/LikeButton.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getUserProfile, userLikes } from '../../api/services/userServices';\nimport { useParams } from 'react-router-dom';\n\nconst Like = ({ postId, user }) => {\n  const [likes, setLikes] = useState([]);\n  const {username} = useParams();\n  const [isLiked,setIsLiked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [profile, setfirst] = useState(second)\n\n  useEffect(() => {\n    setIsLiked(likes.some(like => like.userId === user.userId));\n  }, [likes, user.userId]);\n\n  useEffect(() => {\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        const updatedLikes = await userLikes(postId, user.userId);\n        const userProfile = await getUserProfile(username)\n\n        if (updatedLikes && updatedLikes.likes) {\n          setLikes(updatedLikes.likes);\n          setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n        } else {\n          setError('Failed to fetch likes');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [postId, user.userId]);\n\n  const handleUserLike = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const updatedLikes = await userLikes(postId, user.userId);\n      if (updatedLikes && updatedLikes.likes) {\n        setLikes(updatedLikes.likes);\n        setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n      } else {\n        setError('Failed to update likes');\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <span onClick={handleUserLike} className=\"cursor-pointer\">\n        <i className={`fa-heart ${isLiked ? 'fa-solid text-red-500' : 'fa-regular'}`}></i>\n      </span>\n      <p className=\"mt-10\">Likes: {likes.length}</p>\n      <div>\n        <p className=\"font-semibold\">Liked by:</p>\n        <ul className=\"list-disc list-inside\">\n          {likes.map((like, index) => (\n            <div key={index} className='user-like-box'>\n              <div>\n                <img src={user.userAvatar} alt=\"\" />\n              </div>\n            <li className=\"text-red-500\">\n              {like.username}\n            </li>\n            </div>\n          ))}\n        </ul>\n      </div>\n      {loading && <p>Loading...</p>}\n      {error && <p className=\"text-red-500\">{error}</p>}\n    </div>\n  );\n};\n\nexport default Like;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}