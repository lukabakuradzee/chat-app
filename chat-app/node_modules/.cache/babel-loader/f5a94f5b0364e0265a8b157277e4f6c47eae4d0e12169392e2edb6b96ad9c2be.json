{"ast":null,"code":"var _jsxFileName = \"/Users/macintoshi/Desktop/chat-app/chat-app/src/pages/Settings/EditProfile.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuthContext } from '../../context/auth/AuthContextProvider';\nimport useEscapeKeyHandler from '../../Hooks/EscapeHandler';\nimport Bio from '../../components/UserProfile/UserBio';\n\n// ProfilePhoto component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfilePhoto = ({\n  imageUrl\n}) => {\n  _s();\n  const {\n    state\n  } = useAuthContext();\n  const {\n    user\n  } = state;\n  const [showAttachmentBox, setShowAttachmentBox] = useState(false);\n  const handleAttachmentBoxToggle = () => {\n    setShowAttachmentBox(!showAttachmentBox);\n  };\n  useEscapeKeyHandler(() => {\n    setShowAttachmentBox(false);\n  });\n  const handlePhotoAttach = e => {\n    // Handle photo attachment logic here\n    // You can use this function to upload the selected photo\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-profile-photo\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"photo-name-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageUrl,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"username-span-settings\",\n        children: [\"@\", user.userName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"button-change-photo\",\n        onClick: handleAttachmentBoxToggle,\n        children: \"Change Photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), showAttachmentBox && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-overlay\",\n        onClick: () => handleAttachmentBoxToggle(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"attachment-user-photo-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Change Profile Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: handlePhotoAttach\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this);\n};\n\n// Main EditProfile component\n_s(ProfilePhoto, \"2aqiKj7DaQJD4E9D7H2DbXKbNq0=\", false, function () {\n  return [useAuthContext, useEscapeKeyHandler];\n});\n_c = ProfilePhoto;\nconst EditProfile = ({\n  userName\n}) => {\n  _s2();\n  const {\n    state,\n    dispatch\n  } = useAuthContext();\n  const {\n    user\n  } = state;\n  const [bio, setBio] = useState(localStorage.getItem(`user_${user.userID}_bio`) || user.bio || '');\n  const [gender, setGender] = useState(localStorage.getItem(`user_${user.userID}_gender`) || user.gender || '');\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  useEffect(() => {\n    // Check if there are any changes\n    const hasChanges = bio !== user.bio || gender !== user.gender;\n    setIsSubmitDisabled(!hasChanges);\n  }, [bio, gender, user.bio, user.gender, user.userID]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch({\n      type: 'UPDATE_USER_INFO',\n      payload: {\n        bio,\n        gender\n      }\n    });\n    alert('Bio updated successfully');\n  };\n  useEffect(() => {\n    localStorage.setItem(`user_${user.userID}_bio`, bio);\n  }, [bio, user.userID]);\n  useEffect(() => {\n    localStorage.setItem(`user_${user.userID}_gender`, gender);\n  }, [gender, user.userID]);\n  console.log('State : ', state);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"edit-profile-container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Edit Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-account-component-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(ProfilePhoto, {\n          imageUrl: 'https://images.unsplash.com/flagged/photo-1570612861542-284f4c12e75f?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGVyc29ufGVufDB8fDB8fHww',\n          userName: userName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bio, {\n          bio: bio,\n          setBio: setBio\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Gender, {\n          gender: gender,\n          setGender: setGender\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"submit-button-userprofile\",\n          type: \"submit\",\n          disabled: isSubmitDisabled,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s2(EditProfile, \"DM4p5TCxmJOcKzSYs2k77/2kbl8=\", false, function () {\n  return [useAuthContext];\n});\n_c2 = EditProfile;\nexport default EditProfile;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProfilePhoto\");\n$RefreshReg$(_c2, \"EditProfile\");","map":{"version":3,"names":["React","useState","useEffect","useAuthContext","useEscapeKeyHandler","Bio","jsxDEV","_jsxDEV","ProfilePhoto","imageUrl","_s","state","user","showAttachmentBox","setShowAttachmentBox","handleAttachmentBoxToggle","handlePhotoAttach","e","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","userName","type","onClick","onChange","_c","EditProfile","_s2","dispatch","bio","setBio","localStorage","getItem","userID","gender","setGender","isSubmitDisabled","setIsSubmitDisabled","hasChanges","handleSubmit","preventDefault","payload","alert","setItem","console","log","onSubmit","Gender","disabled","_c2","$RefreshReg$"],"sources":["/Users/macintoshi/Desktop/chat-app/chat-app/src/pages/Settings/EditProfile.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuthContext } from '../../context/auth/AuthContextProvider';\nimport useEscapeKeyHandler from '../../Hooks/EscapeHandler';\nimport Bio from '../../components/UserProfile/UserBio';\n\n// ProfilePhoto component\nconst ProfilePhoto = ({ imageUrl }) => {\n  const { state } = useAuthContext();\n  const { user } = state;\n  const [showAttachmentBox, setShowAttachmentBox] = useState(false);\n\n  const handleAttachmentBoxToggle = () => {\n    setShowAttachmentBox(!showAttachmentBox);\n  };\n\n  useEscapeKeyHandler(() => {\n    setShowAttachmentBox(false);\n  });\n\n  const handlePhotoAttach = (e) => {\n    // Handle photo attachment logic here\n    // You can use this function to upload the selected photo\n  };\n\n  return (\n    <div className=\"user-profile-photo\">\n      <div className=\"photo-name-box\">\n        <img src={imageUrl} alt=\"\" />\n        <span className=\"username-span-settings\">@{user.userName}</span>\n      </div>\n      <div>\n        <button\n          type=\"button\"\n          className=\"button-change-photo\"\n          onClick={handleAttachmentBoxToggle}\n        >\n          Change Photo\n        </button>\n        {showAttachmentBox && (\n          <div\n            className=\"page-overlay\"\n            onClick={() => handleAttachmentBoxToggle()}\n          >\n            <div className=\"attachment-user-photo-box\">\n              <h3>Change Profile Photo</h3>\n              <input type=\"file\" onChange={handlePhotoAttach} />\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n\n\n\n\n// Main EditProfile component\nconst EditProfile = ({ userName }) => {\n  const { state, dispatch } = useAuthContext();\n  const { user } = state;\n  const [bio, setBio] = useState(\n    localStorage.getItem(`user_${user.userID}_bio`) || user.bio || '',\n  );\n\n  const [gender, setGender] = useState(\n    localStorage.getItem(`user_${user.userID}_gender`) || user.gender || '',\n  );\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n\n  useEffect(() => {\n    // Check if there are any changes\n    const hasChanges = bio !== user.bio || gender !== user.gender;\n    setIsSubmitDisabled(!hasChanges);\n  }, [bio, gender, user.bio, user.gender, user.userID]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    dispatch({ type: 'UPDATE_USER_INFO', payload: { bio, gender } });\n    alert('Bio updated successfully');\n  };\n\n  useEffect(() => {\n    localStorage.setItem(`user_${user.userID}_bio`, bio);\n  }, [bio, user.userID]);\n\n  useEffect(() => {\n    localStorage.setItem(`user_${user.userID}_gender`, gender);\n  }, [gender, user.userID]);\n\n  console.log('State : ', state);\n\n\n  return (\n    <div className=\"edit-profile-container\">\n      <form onSubmit={handleSubmit}>\n        <div>\n          <h3>Edit Profile</h3>\n        </div>\n        <div className=\"user-account-component-wrapper\">\n          <ProfilePhoto\n            imageUrl={\n              'https://images.unsplash.com/flagged/photo-1570612861542-284f4c12e75f?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cGVyc29ufGVufDB8fDB8fHww'\n            }\n            userName={userName}\n          />\n          <Bio bio={bio} setBio={setBio} />\n          <Gender gender={gender} setGender={setGender} />\n          <button\n            className=\"submit-button-userprofile\"\n            type=\"submit\"\n            disabled={isSubmitDisabled}\n          >\n            Submit\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default EditProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}