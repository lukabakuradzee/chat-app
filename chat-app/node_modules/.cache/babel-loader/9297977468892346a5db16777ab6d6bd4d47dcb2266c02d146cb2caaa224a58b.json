{"ast":null,"code":"var _jsxFileName = \"/Users/macintoshi/Desktop/chat-app/chat-app/src/components/LikeButton/LikeButton.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getUserProfile, userLikes } from '../../api/services/userServices';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Like = ({\n  postId,\n  user\n}) => {\n  _s();\n  const [likes, setLikes] = useState([]);\n  const [isLiked, setIsLiked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    setIsLiked(likes.some(like => like.userId === user.userId));\n  }, [likes, user.userId]);\n  useEffect(() => {\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        const updatedLikes = await userLikes(postId, user.userId);\n        const userProfile = await getUserProfile(username);\n        if (updatedLikes && updatedLikes.likes) {\n          setLikes(updatedLikes.likes);\n          setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n        } else {\n          setError('Failed to fetch likes');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLikes();\n  }, [postId, user.userId]);\n  const handleUserLike = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const updatedLikes = await userLikes(postId, user.userId);\n      if (updatedLikes && updatedLikes.likes) {\n        setLikes(updatedLikes.likes);\n        setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n      } else {\n        setError('Failed to update likes');\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: handleUserLike,\n      className: \"cursor-pointer\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: `fa-heart ${isLiked ? 'fa-solid text-red-500' : 'fa-regular'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-10\",\n      children: [\"Likes: \", likes.length]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-semibold\",\n        children: \"Liked by:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside\",\n        children: likes.map((like, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-like-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.userAvatar,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-red-500\",\n            children: like.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(Like, \"dBzzHQVnuZ2VzQSMFFVbUqyi6qs=\");\n_c = Like;\nexport default Like;\nvar _c;\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["React","useState","useEffect","getUserProfile","userLikes","jsxDEV","_jsxDEV","Like","postId","user","_s","likes","setLikes","isLiked","setIsLiked","loading","setLoading","error","setError","some","like","userId","fetchLikes","updatedLikes","userProfile","username","message","handleUserLike","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","length","map","index","src","userAvatar","alt","_c","$RefreshReg$"],"sources":["/Users/macintoshi/Desktop/chat-app/chat-app/src/components/LikeButton/LikeButton.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getUserProfile, userLikes } from '../../api/services/userServices';\n\nconst Like = ({ postId, user }) => {\n  const [likes, setLikes] = useState([]);\n  const [isLiked, setIsLiked] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    setIsLiked(likes.some(like => like.userId === user.userId));\n  }, [likes, user.userId]);\n\n  useEffect(() => {\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        const updatedLikes = await userLikes(postId, user.userId);\n        const userProfile = await getUserProfile(username)\n        if (updatedLikes && updatedLikes.likes) {\n          setLikes(updatedLikes.likes);\n          setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n        } else {\n          setError('Failed to fetch likes');\n        }\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [postId, user.userId]);\n\n  const handleUserLike = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const updatedLikes = await userLikes(postId, user.userId);\n      if (updatedLikes && updatedLikes.likes) {\n        setLikes(updatedLikes.likes);\n        setIsLiked(updatedLikes.likes.some(like => like.userId === user.userId));\n      } else {\n        setError('Failed to update likes');\n      }\n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <span onClick={handleUserLike} className=\"cursor-pointer\">\n        <i className={`fa-heart ${isLiked ? 'fa-solid text-red-500' : 'fa-regular'}`}></i>\n      </span>\n      <p className=\"mt-10\">Likes: {likes.length}</p>\n      <div>\n        <p className=\"font-semibold\">Liked by:</p>\n        <ul className=\"list-disc list-inside\">\n          {likes.map((like, index) => (\n            <div key={index} className='user-like-box'>\n              <div>\n                <img src={user.userAvatar} alt=\"\" />\n              </div>\n            <li className=\"text-red-500\">\n              {like.username}\n            </li>\n            </div>\n          ))}\n        </ul>\n      </div>\n      {loading && <p>Loading...</p>}\n      {error && <p className=\"text-red-500\">{error}</p>}\n    </div>\n  );\n};\n\nexport default Like;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}